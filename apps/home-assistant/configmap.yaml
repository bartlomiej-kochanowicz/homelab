apiVersion: v1
kind: ConfigMap
metadata:
  name: home-assistant-config
  namespace: home-assistant
  labels:
    app.kubernetes.io/name: home-assistant
    app.kubernetes.io/part-of: homelab
data:
  configuration.yaml: |
    # Loads default set of integrations. Do not remove.
    default_config:

    # Load frontend themes from the themes folder
    frontend:
      themes: !include_dir_merge_named themes

    # HTTP configuration for reverse proxy (Cloudflare Tunnel)
    http:
      use_x_forwarded_for: true
      trusted_proxies:
        - 10.244.0.0/16  # Pod network CIDR
        - 127.0.0.1
        - ::1

    # Text to speech
    tts:
      - platform: google_translate

    automation: !include automations.yaml
    script: !include scripts.yaml
    scene: !include scenes.yaml

    # Logger configuration
    logger:
      default: warning
      logs:
        pychromecast.socket_client: critical  # Suppress LG TV socket errors
